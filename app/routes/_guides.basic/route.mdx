---
title: "Basic Example"
description: "A simple example using srcset and sizes"
image: /social/basic.jpg
imageAlt: "A puppy sleeping on it's back with it's mouth slightly open"
order: 1
---

import placeholderImgSrc from "./sleepy_girl_placeholder.webp";
import fallbackImgSrc from "./sleepy_girl.webp";
import smallImgSrc from "./sleepy_girl_small.webp";
import mediumImgSrc from "./sleepy_girl_medium.webp";
import largeImgSrc from "./sleepy_girl_large.webp";

export function links() {
  return [
    {
      rel: "preload",
      href: placeholderImgSrc,
      as: "image",
    },
  ];
}

# Basic Image example

Here we have a simple example example using `srcset` and `sizes`, as well as a blurred placeholder image set using the css `background` property.

<div
  className="max-w-[800px] aspect-[3/4]"
  style={{
    background: `top / contain no-repeat url(${placeholderImgSrc})`,
  }}
>
  <img
    className="w-full"
    alt="A puppy sleeping on it's back with it's mouth slightly open"
    src={fallbackImgSrc}
    sizes="(min-width: 400px) 800px, 100vw"
    srcSet={`${smallImgSrc} 400w, ${mediumImgSrc} 640w, ${largeImgSrc} 800w`}
  />
</div>

## Generating the images

I used [ffmepg][ffmpeg] to generate the various versions of the image

```sh
$ ffmpeg -i ./sleepy_girl.jpg -vf scale=200:-1 -q:v 80 ./sleepy_girl.webp
```

To create these images I took an old photo of my sweet puppy sleeping and converted it to [webp]. I also scaled the image to 400px, 640px, and 800px. Additionally, I set the quality (`-q:v`) to 80 (out of 100) to make the images a little smaller.

I also created a small, placeholder image with blur effect using the following command:

```sh
$ ffmpeg -i ./sleepy_girl.jpg -vf "scale=iw/10:-1,boxblur=5:1" ./sleepy_girl_placeholder.webp
```

These are the files I ended up with:

```
├── sleepy_girl.jpg
├── sleepy_girl.webp
├── sleepy_girl_small.webp
├── sleepy_girl_medium.webp
├── sleepy_girl_large.webp
└── sleepy_girl_placeholder.webp
```

## The placeholder

The placeholder is actually rendered using the `background` css property. The nice thing about this is once the image is loaded, the placeholder is covered by the actual image. This is a nice way to provide a good user experience if the image is still loading.

It's important to provide the proper width and an [aspect ratio][aspect-ratio] to avoid cumulative layout shift (CLS).

```jsx
<div
  className="max-w-[800px] aspect-[3/4]"
  style={{
    background: `top / contain no-repeat url(${placeholderImgSrc})`,
  }}
>
  <img />
</div>
```

Additionally, to make sure the placeholder image loads as quickly as possible, I added it to the `links` export for the route

```js
export function links() {
  return [
    {
      rel: "preload",
      href: placeholderImgSrc,
      as: "image",
    },
  ];
}
```

## srcset and sizes

The `srcset` attribute tells the browser which image to load based on the device's pixel density and the size of the image. The `sizes` attribute tells the browser how large the image will be displayed on the page.

I honestly still don't totally get these attributes, so when doing it manually I just mess around with each value until I'm happy with the loading strategy. We'll see later in other strategies, it's very common to have these values programatically created for you, which is what I would recommend doing for most cases.

```jsx
<img
  className="w-full"
  alt="A puppy sleeping on it's back with it's mouth slightly open"
  src={fallbackImgSrc}
  sizes="(min-width: 400px) 800px, 100vw"
  srcSet={`${smallImgSrc} 400w, ${mediumImgSrc} 640w, ${largeImgSrc} 800w`}
/>
```

[ffmpeg]: https://ffmpeg.org/
[webp]: https://developers.google.com/speed/webp
[aspect-ratio]: https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio
[sizes]: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#sizes
[srcset]: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img#srcset
